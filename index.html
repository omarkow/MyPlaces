<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Places - Carte interactive des lieux d'int√©r√™t</title>
    <meta name="description" content="D√©couvrez et explorez une carte interactive des lieux d'int√©r√™t remarquables">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üó∫Ô∏è</text></svg>">
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Mapbox GL JS -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />
    
    <!-- Mapbox Geocoder -->
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" type="text/css">
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Image Compression -->
    <script src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" role="navigation" aria-label="Navigation principale">
        <div class="logo">
            <span class="logo-text" aria-label="My Places - Accueil">My Places</span>
        </div>
        <div class="nav-controls">
            <button 
                class="btn-login" 
                aria-label="Connexion"
                title="Se connecter">
                Connexion
            </button>
            <button 
                id="btn-filters-toggle" 
                class="btn-filters-modern" 
                aria-label="Filtres cat√©gories"
                title="Filtrer par cat√©gorie">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                    <polyline points="21,15 16,10 5,21"></polyline>
                </svg>
            </button>
            
            <!-- Panneau de filtres -->
            <div id="category-filters" class="modern-filters-panel" role="dialog" aria-label="Filtres des cat√©gories">
                <div class="filters-header">
                    <span>üó∫Ô∏è Filtres cat√©gories</span>
                    <button 
                        id="btn-close-filters" 
                        class="btn-close-modern"
                        aria-label="Fermer les filtres">
                        √ó
                    </button>
                </div>
                <div class="filters-grid">
                    <label class="filter-item culte">
                        <input type="checkbox" class="cat-filter" value="culte" checked>
                        <span class="checkmark culte" aria-hidden="true"></span>
                        <span class="filter-label">Lieux de culte</span>
                    </label>
                    <label class="filter-item chateaux">
                        <input type="checkbox" class="cat-filter" value="chateaux" checked>
                        <span class="checkmark chateaux" aria-hidden="true"></span>
                        <span class="filter-label">Ch√¢teaux, palais et monuments</span>
                    </label>
                    <label class="filter-item historique">
                        <input type="checkbox" class="cat-filter" value="historique" checked>
                        <span class="checkmark historique" aria-hidden="true"></span>
                        <span class="filter-label">Sites arch√©ologiques ou historiques</span>
                    </label>
                    <label class="filter-item panorama">
                        <input type="checkbox" class="cat-filter" value="panorama" checked>
                        <span class="checkmark panorama" aria-hidden="true"></span>
                        <span class="filter-label">Paysages et panorama</span>
                    </label>
                    <label class="filter-item plages">
                        <input type="checkbox" class="cat-filter" value="plages" checked>
                        <span class="checkmark plages" aria-hidden="true"></span>
                        <span class="filter-label">Plages</span>
                    </label>
                    <label class="filter-item autres">
                        <input type="checkbox" class="cat-filter" value="autres" checked>
                        <span class="checkmark autres" aria-hidden="true"></span>
                        <span class="filter-label">Autres</span>
                    </label>
                </div>
                <div class="filters-footer">
                    <button id="btn-toggle-all" class="btn-toggle-modern">
                        Tout masquer
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Carte principale -->
    <main id="map-container" role="main" aria-label="Carte interactive des lieux"></main>

    <!-- Contr√¥les de zoom personnalis√©s -->
    <div id="zoom-controls" class="zoom-controls" role="group" aria-label="Contr√¥les de zoom">
        <button 
            id="zoom-in-btn" 
            class="zoom-btn zoom-in" 
            aria-label="Zoomer"
            title="Zoomer (+)">
            +
        </button>
        <button 
            id="zoom-out-btn" 
            class="zoom-btn zoom-out" 
            aria-label="D√©zoomer"
            title="D√©zoomer (-)">
            ‚àí
        </button>
    </div>

    <!-- Panneau lat√©ral -->
    <aside class="sidebar" role="complementary">
        <div id="side-panel" class="panel-hidden" role="dialog" aria-label="D√©tails du lieu">
            <button 
                id="close-panel" 
                class="btn-close"
                aria-label="Fermer le panneau">
                √ó
            </button>
            <div id="panel-content" class="panel-content">
                <h2 id="panel-title"></h2>
                <p id="panel-city" class="panel-city"></p>
                <div id="panel-image-container" class="panel-images"></div>
                <p id="panel-description" class="panel-description"></p>
                <div id="admin-controls" class="admin-controls"></div>
            </div>
        </div>
    </aside>

    <!-- Lightbox pour les images -->
    <div id="lightbox" role="dialog" aria-label="Visionneuse d'images">
        <span 
            id="lightbox-close" 
            role="button" 
            aria-label="Fermer la visionneuse"
            tabindex="0">
            &times;
        </span>
        <button 
            id="prev-btn" 
            class="lightbox-nav" 
            aria-label="Image pr√©c√©dente">
            &#10094;
        </button>
        <img 
            id="lightbox-img" 
            src="" 
            alt="Image agrandie">
        <button 
            id="next-btn" 
            class="lightbox-nav" 
            aria-label="Image suivante">
            &#10095;
        </button>
    </div>

    <!-- Modal de connexion -->
    <div id="login-modal" class="modal" role="dialog" aria-labelledby="modal-title">
        <div class="modal-content">
            <span 
                class="close-modal" 
                id="close-login"
                role="button"
                aria-label="Fermer"
                tabindex="0">
                &times;
            </span>
            <h2 id="modal-title">Connexion</h2>
            <form id="login-form">
                <input 
                    type="email" 
                    id="email" 
                    placeholder="Email" 
                    aria-label="Adresse email"
                    required>
                <input 
                    type="password" 
                    id="password" 
                    placeholder="Mot de passe" 
                    aria-label="Mot de passe"
                    required>
                <button type="submit" class="btn-submit">
                    Se connecter
                </button>
            </form>
            <div id="admin-only-section" class="hidden">
                <hr>
                <button id="btn-create-account" class="btn-secondary">
                    Cr√©er un compte utilisateur
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts - Module ES6 -->
    <script type="module" src="app.js"></script>
    
    <!-- Fallback pour navigateurs sans support ES6 modules -->
    <noscript>
        <div style="padding: 20px; text-align: center; background: #fee; color: #c00;">
            JavaScript est requis pour utiliser cette application.
        </div>
    </noscript>
</body>
</html>
